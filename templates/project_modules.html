<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ project.name }} - Modules ğŸ› ï¸</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h1>Project: {{ project.name }}</h1>
    <h3>Overall Progress</h3>
    <div class="progress-container">
        <div class="progress-bar" style="width: {{ project_progress }}%;">
            {{ project_progress }}%
        </div>
    </div>

    <h2>Modules</h2>
    <ul>
        {% for module in modules %}
            <li>
                <div>
                    <a href="/module/{{ module.id }}"><strong>{{ module.name }}</strong></a><br>
                    <small>ğŸ‘¤ {{ module.member_name if module.member_name else 'Unassigned' }}</small>
                </div>
                <span>{{ 'âœ… Done' if module.completed else 'â³ In Progress' }}</span>
            </li>
        {% else %}
            <li style="justify-content: center;">No modules yet. Break the project down!</li>
        {% endfor %}
    </ul>

    <hr style="border: 1px dashed #90e0ef; width: 60%;">

    <h3>Add Team Member</h3>
    <form method="POST" action="/project/{{ project.id }}/add_member">
        <input type="text" name="member_name" placeholder="New Member Name" required>
        <button type="submit">Add ğŸ‘¤</button>
    </form>

    <h3>Add New Module</h3>
    <form method="POST" action="/project/{{ project.id }}/add_module">
        <input type="text" name="module_name" placeholder="What needs to be done?" required>
        <select name="assigned_member" required>
            <option value="" disabled selected>Assign to...</option>
            {% for member in members %}
                <option value="{{ member.id }}">{{ member.name }}</option>
            {% endfor %}
        </select>
        <button type="submit">Add ğŸ¯</button>
    </form>

    <br>
    <a href="/project/{{ project.id }}/report"><button style="background: #ffb703;">View Final Report ğŸ†</button></a>
    <br>
    <a href="/">Back to Projects</a>
</body>
</html>